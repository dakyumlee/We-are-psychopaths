<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <link rel="stylesheet" href="mobile-fix.css">
    <title>당신의 정신병 일지</title>
    <link href="main.css" rel="stylesheet"/>
    <link href="diary-board.css" rel="stylesheet"/>
    <link rel="stylesheet" href="css/chatbot.css">
    <script src="js/chatbot.js"></script>
</head>
<body class="song-myung-regular">
    <nav>
        <ul class="nav-container">
            <li><a href="index.html">홈</a></li>
            <li><a href="movie.html">영화: &lt;우리의 정신병 일지&gt;</a></li>
            <li><a href="my-diary.html">나의 정신병 일지</a></li>
            <li><a href="your-diary.html" class="active">당신의 정신병 일지</a></li>
            <li><a href="recovery.html">당신의 회복 일지</a></li>
            <li><a href="archive.html">아카이빙</a></li>
        </ul>
    </nav>

    <div class="main-container">
        <div class="page-hero">
            <h1>당신의 정신병 일지</h1>
            <p class="subtitle">함께 나누는 이야기들</p>
        </div>

        <div class="guide-section">
            <div class="guide-content">
                <h3>💬 당신의 이야기</h3>
                <p>
                    이곳을 방문한 모든 이들이 글을 남기는 공간입니다. 
                    당신의 이야기를 듣고 싶습니다.
                </p>
                <p>
                    정신질환 당사자, 당사자의 가족 뿐만 아니라 오늘 느낀 우울, 무기력, 허탈 등 
                    힘들었던 부정적인 감정을 이 곳에서 나눌 수 있습니다. 어떤 이야기든 남겨주세요.
                </p>
                <div class="guide-rules">
                    <h4>🚨 주의사항</h4>
                    <p style="color: #dc3545; font-weight: bold; text-align: center;">
                        익명 커뮤니티인 만큼 악플을 달거나 혐오/차별을 조장하는 글은 무통보 삭제 처리합니다.
                    </p>
                </div>
            </div>
        </div>

        <div class="write-section">
            <h3>✍️ 당신의 이야기를 들려주세요</h3>
            <form id="story-form" class="story-form">
                <div class="form-group">
                    <label for="story-title">제목 (선택사항)</label>
                    <input type="text" id="story-title" placeholder="제목을 입력하세요 (비워두면 '익명의 이야기'로 표시됩니다)">
                </div>
                
                <div class="form-group">
                    <label for="story-category">카테고리</label>
                    <select id="story-category" required>
                        <option value="">카테고리를 선택하세요</option>
                        <option value="daily">일상 이야기</option>
                        <option value="family">가족 이야기</option>
                        <option value="treatment">치료 경험</option>
                        <option value="emotion">감정 나누기</option>
                        <option value="recovery">회복 과정</option>
                        <option value="music">음악 추천</option>
                        <option value="support">응원 메시지</option>
                        <option value="question">질문/고민</option>
                        <option value="other">기타</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="story-content">내용</label>
                    <textarea id="story-content" rows="8" placeholder="자유롭게 이야기를 써주세요. 힘든 일, 기쁜 일, 일상의 소소한 것들까지... 무엇이든 좋습니다." required></textarea>
                </div>

                <div class="form-group">
                    <label for="youtube-link">유튜브 링크 (선택사항)</label>
                    <input type="url" id="youtube-link" placeholder="https://youtube.com/playlist?list=... 또는 https://youtu.be/...">
                    <small class="form-help">추천하고 싶은 음악이나 플레이리스트가 있다면 공유해주세요!</small>
                </div>

                <div class="form-group">
                    <label for="story-nickname">닉네임</label>
                    <input type="text" id="story-nickname" placeholder="익명" maxlength="20">
                    <small class="form-help">닉네임을 비워두면 '익명'으로 표시됩니다</small>
                </div>

                <div class="form-actions">
                    <button type="submit" class="submit-btn">이야기 공유하기</button>
                    <button type="reset" class="reset-btn">초기화</button>
                </div>
            </form>
        </div>

        <div class="filter-section">
            <div class="filter-controls">
                <div class="category-filter">
                    <label for="category-filter">카테고리:</label>
                    <select id="category-filter">
                        <option value="">전체</option>
                        <option value="daily">일상 이야기</option>
                        <option value="family">가족 이야기</option>
                        <option value="treatment">치료 경험</option>
                        <option value="emotion">감정 나누기</option>
                        <option value="recovery">회복 과정</option>
                        <option value="music">음악 추천</option>
                        <option value="support">응원 메시지</option>
                        <option value="question">질문/고민</option>
                        <option value="other">기타</option>
                    </select>
                </div>

                <div class="sort-controls">
                    <label>정렬:</label>
                    <div class="sort-buttons">
                        <button class="sort-btn active" data-sort="recent">최신순</button>
                        <button class="sort-btn" data-sort="likes">좋아요순</button>
                        <button class="sort-btn" data-sort="comments">댓글순</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="stories-section">
            <div id="stories-list" class="stories-list">
            </div>
            
            <div class="load-more-section">
                <button id="load-more-btn" class="load-more-btn">더 많은 이야기 보기</button>
            </div>
        </div>

        <div class="playlist-section">
            <h2>🎵 임쭈쭈 추천 플레이리스트</h2>
            <p style="color: #d4c4a8; margin-bottom: 30px; text-align: center;">
                감독 주은이 추천하는 음악들을 들어보세요.
            </p>
            <div class="youtube-playlists" id="youtubePlaylists">
            </div>
        </div>

        <div class="emergency-info">
            <div class="emergency-content">
                <h4>🚨 긴급한 도움이 필요하신가요?</h4>
                <p>혼자 견디지 마시고 전문가의 도움을 받으세요.</p>
                <div class="emergency-contacts">
                    <a href="tel:129" class="emergency-link">
                        📞 정신건강 상담전화 129
                    </a>
                    <a href="tel:119" class="emergency-link">
                        🚑 응급상황 119
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div id="story-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title"></h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="modal-story-content"></div>
                <div id="modal-youtube" class="youtube-container" style="display: none;"></div>
                
                <div class="comments-section">
                    <h4>💬 댓글</h4>
                    <div id="comments-list" class="comments-list"></div>
                    
                    <form id="comment-form" class="comment-form">
                        <textarea id="comment-content" rows="3" placeholder="따뜻한 댓글을 남겨주세요..." required></textarea>
                        <div class="comment-actions">
                            <input type="text" id="comment-nickname" placeholder="익명" maxlength="15">
                            <button type="submit">댓글 작성</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="js/your-diary.js"></script>
</body>
</html>