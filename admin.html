<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Í∞êÎèÖ Í¥ÄÎ¶¨ Ìå®ÎÑê</title>
<style>
body {
    background-color: #4e2e1e;
    color: #f5f0e6;
    font-family: "Song Myung", serif;
}

.admin-panel {
    max-width: 1400px;
    margin: 0 auto;
    padding: 100px 20px 20px;
    font-family: "Song Myung", serif;
    background-color: #4e2e1e;
}

.panel-header {
    text-align: center;
    margin-bottom: 3rem;
    background: rgba(245, 240, 230, 0.05);
    padding: 2rem;
    border-radius: 12px;
    border-left: 4px solid #8d6e63;
}

.panel-header h1 {
    font-size: 2.5em;
    margin-bottom: 10px;
    color: #f5f0e6;
}

.panel-header p {
    color: #d4c4a8;
    font-size: 1.2em;
    margin: 0;
}

.management-tabs {
    display: flex;
    justify-content: center;
    margin-bottom: 3rem;
    background: rgba(245, 240, 230, 0.05);
    border-radius: 12px;
    padding: 15px;
    flex-wrap: wrap;
    gap: 10px;
}

.tab-button {
    padding: 12px 24px;
    background: rgba(245, 240, 230, 0.1);
    border: 1px solid rgba(245, 240, 230, 0.2);
    border-radius: 25px;
    color: #f5f0e6;
    cursor: pointer;
    font-family: "Song Myung", serif;
    font-size: 1.1em;
    transition: all 0.3s ease;
}

.tab-button:hover {
    background: rgba(245, 240, 230, 0.15);
    transform: translateY(-2px);
}

.tab-button.active {
    background: #8d6e63;
    border-color: #8d6e63;
    color: #f5f0e6;
}

.management-card {
    background: rgba(245, 240, 230, 0.05);
    border: 1px solid rgba(245, 240, 230, 0.1);
    border-left: 4px solid #8d6e63;
    border-radius: 12px;
    padding: 2rem;
    margin-bottom: 2rem;
    transition: all 0.3s ease;
}

.management-card:hover {
    background: rgba(245, 240, 230, 0.08);
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.card-title {
    color: #f5f0e6;
    font-size: 1.5em;
    margin-bottom: 1.5rem;
    text-align: center;
}

.form-section {
    margin-bottom: 2rem;
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    color: #d4c4a8;
    font-weight: bold;
    margin-bottom: 8px;
    font-size: 1.1em;
}

.form-section input,
.form-section textarea,
.form-section select {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid rgba(245, 240, 230, 0.2);
    border-radius: 8px;
    background: rgba(245, 240, 230, 0.1);
    color: #f5f0e6;
    font-family: "Song Myung", serif;
    font-size: 1em;
    transition: all 0.3s ease;
    box-sizing: border-box;
}

.form-section input:focus,
.form-section textarea:focus,
.form-section select:focus {
    outline: none;
    border-color: #8d6e63;
    background: rgba(245, 240, 230, 0.15);
    box-shadow: 0 0 15px rgba(141, 110, 99, 0.3);
}

.form-section textarea {
    resize: vertical;
    min-height: 100px;
    line-height: 1.6;
}

.form-section button,
.action-btn {
    padding: 12px 25px;
    background: #8d6e63;
    color: #f5f0e6;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    font-family: "Song Myung", serif;
    font-size: 1.1em;
    transition: all 0.3s ease;
    min-width: 140px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.form-section button:hover,
.action-btn:hover {
    background: #a1887f;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(141, 110, 99, 0.4);
}

.danger-btn {
    background: #dc3545 !important;
}

.danger-btn:hover {
    background: #c82333 !important;
    box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4) !important;
}

.secondary-btn {
    background: rgba(245, 240, 230, 0.1) !important;
    border: 1px solid rgba(245, 240, 230, 0.2) !important;
}

.secondary-btn:hover {
    background: rgba(245, 240, 230, 0.15) !important;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2) !important;
}

.login-section {
    max-width: 500px;
    margin: 200px auto;
    text-align: center;
    background: rgba(245, 240, 230, 0.05);
    padding: 3rem;
    border-radius: 12px;
    border-left: 4px solid #8d6e63;
}

.login-section h1 {
    color: #f5f0e6;
    font-size: 2.2em;
    margin-bottom: 20px;
}

.login-section p {
    color: #d4c4a8;
    font-size: 1.1em;
    line-height: 1.6;
    margin-bottom: 2rem;
}

.login-section input {
    width: 100%;
    max-width: 300px;
    padding: 15px 20px;
    margin: 15px 0;
    border: 1px solid rgba(245, 240, 230, 0.3);
    border-radius: 25px;
    background: rgba(245, 240, 230, 0.1);
    color: #f5f0e6;
    font-size: 1.1em;
    text-align: center;
    transition: all 0.3s ease;
}

.login-section input:focus {
    outline: none;
    border-color: #8d6e63;
    background: rgba(245, 240, 230, 0.15);
    box-shadow: 0 0 15px rgba(141, 110, 99, 0.3);
}

.login-section button {
    padding: 15px 30px;
    font-size: 1.2em;
    margin-top: 10px;
}

.logout-btn {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 10px 20px;
    background: #dc3545;
    color: #f5f0e6;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    font-family: "Song Myung", serif;
    font-size: 1em;
    z-index: 1000;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.logout-btn:hover {
    background: #c82333;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4);
}

.status-message {
    padding: 15px 20px;
    margin: 15px 0;
    border-radius: 8px;
    text-align: center;
    font-weight: bold;
    border-left: 4px solid;
}

.success {
    background: rgba(92, 184, 92, 0.2);
    color: #5cb85c;
    border-color: #5cb85c;
}

.error {
    background: rgba(217, 83, 79, 0.2);
    color: #d9534f;
    border-color: #d9534f;
}

.management-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 2rem;
    margin-bottom: 3rem;
}

.content-list {
    max-height: 400px;
    overflow-y: auto;
    margin: 20px 0;
    border-top: 1px solid rgba(245, 240, 230, 0.2);
    padding-top: 20px;
}

.content-item {
    background: rgba(245, 240, 230, 0.05);
    border-left: 4px solid #8d6e63;
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 8px;
    position: relative;
    transition: all 0.3s ease;
}

.content-item:hover {
    background: rgba(245, 240, 230, 0.1);
    transform: translateX(5px);
}

.content-item h4 {
    color: #f5f0e6;
    margin: 0 0 8px 0;
    padding-right: 120px;
}

.content-item p {
    color: #d4c4a8;
    margin: 5px 0 0 0;
    font-size: 0.9em;
    padding-right: 120px;
}

.content-actions {
    position: absolute;
    top: 15px;
    right: 15px;
    display: flex;
    gap: 8px;
}

.content-actions button {
    padding: 6px 12px;
    font-size: 0.85em;
    min-width: auto;
}

.progress-container {
    margin: 15px 0;
}

.progress-bar {
    background: rgba(245, 240, 230, 0.2);
    border-radius: 10px;
    overflow: hidden;
    height: 8px;
}

.progress-fill {
    background: #8d6e63;
    height: 100%;
    width: 0%;
    transition: width 0.3s ease;
}

.file-info {
    font-size: 0.9em;
    color: #d4c4a8;
    margin-top: 8px;
    font-style: italic;
}

.hidden {
    display: none !important;
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
    animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
    from { 
        opacity: 0; 
        transform: translateY(10px); 
    }
    to { 
        opacity: 1; 
        transform: translateY(0); 
    }
}

@media (max-width: 768px) {
    .admin-panel {
        padding: 120px 15px 20px;
    }
    
    .panel-header {
        padding: 1.5rem;
    }
    
    .panel-header h1 {
        font-size: 2em;
    }
    
    .management-tabs {
        flex-direction: column;
        align-items: center;
        gap: 8px;
    }
    
    .tab-button {
        width: 100%;
        max-width: 300px;
        text-align: center;
    }
    
    .management-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    
    .management-card {
        padding: 1.5rem;
    }
    
    .content-item h4,
    .content-item p {
        padding-right: 80px;
    }
    
    .content-actions {
        flex-direction: column;
        gap: 5px;
    }
    
    .login-section {
        margin: 120px auto;
        padding: 2rem;
    }
    
    .login-section h1 {
        font-size: 1.8em;
    }
}

@media (max-width: 480px) {
    .management-card {
        padding: 1rem;
    }
    
    .card-title {
        font-size: 1.3em;
    }
    
    .content-item h4,
    .content-item p {
        padding-right: 60px;
    }
    
    .content-actions button {
        padding: 4px 8px;
        font-size: 0.8em;
    }
    
    .logout-btn {
        top: 15px;
        right: 15px;
        padding: 8px 15px;
        font-size: 0.9em;
    }
}
</style>
</head>
<body class="song-myung-regular">

<div id="login-section" class="login-section">
<h1>üé¨ Í∞êÎèÖ Í¥ÄÎ¶¨ Ìå®ÎÑê</h1>
<p>
    Ïù¥ ÌéòÏù¥ÏßÄÎäî Í∞êÎèÖ Ï†ÑÏö©ÏûÖÎãàÎã§.<br>
    ÎßàÏä§ÌÑ∞ÌÇ§Î•º ÏûÖÎ†•Ìï¥ Ï£ºÏÑ∏Ïöî.
</p>
<input type="password" id="master-key" placeholder="ÎßàÏä§ÌÑ∞ÌÇ§ ÏûÖÎ†•" />
<br>
<button id="login-btn">Î°úÍ∑∏Ïù∏</button>
<div id="login-message" style="margin-top: 1rem;"></div>
</div>

<div id="admin-panel" class="admin-panel hidden">
<button class="logout-btn" id="logout-btn">Î°úÍ∑∏ÏïÑÏõÉ</button>

<div class="panel-header">
    <h1>üé¨ Í∞êÎèÖ Í¥ÄÎ¶¨ Ìå®ÎÑê</h1>
    <p>Î™®Îì† ÏΩòÌÖêÏ∏†Î•º Ìïú Í≥≥ÏóêÏÑú Í¥ÄÎ¶¨ÌïòÏÑ∏Ïöî</p>
</div>

<div class="management-tabs">
    <button class="tab-button active" onclick="showTab('diary')">üìù ÏùºÍ∏∞</button>
    <button class="tab-button" onclick="showTab('timeline')">‚è∞ ÌÉÄÏûÑÎùºÏù∏</button>
    <button class="tab-button" onclick="showTab('gallery')">üì∏ Í∞§Îü¨Î¶¨</button>
    <button class="tab-button" onclick="showTab('video')">üé• ÏòÅÏÉÅ</button>
    <button class="tab-button" onclick="showTab('archive')">üìÇ ÏïÑÏπ¥Ïù¥Î∏å</button>
    <button class="tab-button" onclick="showTab('chatbot')">üí¨ Ï±óÎ¥á Î∂ÑÏÑù</button>
</div>

<div id="diary-tab" class="tab-content active">
    <div class="management-card">
        <h2 class="card-title">üìù ÏùºÍ∏∞ ÏûëÏÑ±</h2>
        <form id="diary-form" class="form-section">
            <div class="form-group">
                <label for="diary-title">ÏùºÍ∏∞ Ï†úÎ™©</label>
                <input type="text" id="diary-title" placeholder="ÏùºÍ∏∞ Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required />
            </div>
            <div class="form-group">
                <label for="diary-content">ÏùºÍ∏∞ ÎÇ¥Ïö©</label>
                <textarea id="diary-content" rows="10" placeholder="Ïò§ÎäòÏùò ÏùºÍ∏∞Î•º Ïç®Î≥¥ÏÑ∏Ïöî..." required></textarea>
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="diary-private"> ÎπÑÍ≥µÍ∞ú Í∏ÄÎ°ú ÏûëÏÑ±
                </label>
            </div>
            <button type="submit">ÏùºÍ∏∞ Îì±Î°ù</button>
        </form>
        <div id="diary-message"></div>
    </div>
</div>

<div id="timeline-tab" class="tab-content">
    <div class="management-card">
        <h2 class="card-title">‚è∞ ÌÉÄÏûÑÎùºÏù∏ Ïù¥Î≤§Ìä∏ Ï∂îÍ∞Ä</h2>
        <form id="timeline-form" class="form-section">
            <div class="form-group">
                <label for="timeline-date">ÎÇ†Ïßú</label>
                <input type="date" id="timeline-date" required />
            </div>
            <div class="form-group">
                <label for="timeline-content">Ïù¥Î≤§Ìä∏ ÎÇ¥Ïö©</label>
                <textarea id="timeline-content" rows="4" placeholder="ÌÉÄÏûÑÎùºÏù∏Ïóê Ï∂îÍ∞ÄÌï† Ïù¥Î≤§Ìä∏ ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required></textarea>
            </div>
            <button type="submit">Ïù¥Î≤§Ìä∏ Ï∂îÍ∞Ä</button>
        </form>
        <div id="timeline-message"></div>
    </div>
</div>

<div id="gallery-tab" class="tab-content">
    <div class="management-card">
        <h2 class="card-title">üì∏ ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú</h2>
        <form id="gallery-form" class="form-section">
            <div class="form-group">
                <label for="gallery-image">ÏÇ¨ÏßÑ ÏÑ†ÌÉù</label>
                <input type="file" id="gallery-image" accept="image/*" required />
                <div id="gallery-file-info" class="file-info"></div>
            </div>
            <div class="form-group">
                <label for="gallery-caption">ÏÇ¨ÏßÑ ÏÑ§Î™Ö</label>
                <textarea id="gallery-caption" rows="3" placeholder="ÏÇ¨ÏßÑÏóê ÎåÄÌïú ÏÑ§Î™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required></textarea>
            </div>
            <button type="submit">ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú</button>
        </form>
        <div id="gallery-message"></div>
    </div>
</div>

<div id="video-tab" class="tab-content">
    <div class="management-card">
        <h2 class="card-title">üé• ÏòÅÏÉÅ ÏóÖÎ°úÎìú</h2>
        <form id="video-form" class="form-section">
            <div class="form-group">
                <label for="video-title">ÏòÅÏÉÅ Ï†úÎ™©</label>
                <input type="text" id="video-title" placeholder="ÏòÅÏÉÅ Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required />
            </div>
            <div class="form-group">
                <label for="video-description">ÏòÅÏÉÅ ÏÑ§Î™Ö</label>
                <textarea id="video-description" rows="3" placeholder="ÏòÅÏÉÅÏóê ÎåÄÌïú ÏÑ§Î™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî"></textarea>
            </div>
            
            <div class="form-group">
                <label>ÏòÅÏÉÅ ÏóÖÎ°úÎìú Î∞©Ïãù</label>
                <div style="margin: 10px 0;">
                    <label style="margin-right: 20px;">
                        <input type="radio" name="video-type" value="youtube" checked> YouTube ÎßÅÌÅ¨
                    </label>
                    <label>
                        <input type="radio" name="video-type" value="file"> ÌååÏùº ÏóÖÎ°úÎìú
                    </label>
                </div>
            </div>
            
            <div id="youtube-input" class="form-group">
                <label for="youtube-url">YouTube URL</label>
                <input type="url" id="youtube-url" placeholder="https://www.youtube.com/watch?v=..." />
            </div>
            
            <div id="file-input" class="form-group" style="display:none;">
                <label for="video-file">ÎπÑÎîîÏò§ ÌååÏùº</label>
                <input type="file" id="video-file" accept=".mp4,.webm,.mov,.avi,.mkv,.flv,video/*" />
                <div id="video-file-info" class="file-info"></div>
            </div>
            
            <button type="submit">ÏòÅÏÉÅ ÏóÖÎ°úÎìú</button>
        </form>
        <div id="video-message"></div>
    </div>
</div>

<div id="archive-tab" class="tab-content">
    <div class="management-grid">
        <div class="management-card">
            <h2 class="card-title">üìÇ ÌÉÄÏûÑÎùºÏù∏ Ïù¥Î≤§Ìä∏</h2>
            <form id="archive-timeline-form" class="form-section">
                <div class="form-group">
                    <label for="archive-event-date">ÎÇ†Ïßú</label>
                    <input type="date" id="archive-event-date" required />
                </div>
                <div class="form-group">
                    <label for="archive-event-title">Ïù¥Î≤§Ìä∏ Ï†úÎ™©</label>
                    <input type="text" id="archive-event-title" placeholder="ÌîÑÎ°úÏ†ùÌä∏ ÏãúÏûë" required />
                </div>
                <div class="form-group">
                    <label for="archive-event-description">Ïù¥Î≤§Ìä∏ ÏÑ§Î™Ö</label>
                    <textarea id="archive-event-description" rows="4" placeholder="Ïù¥Î≤§Ìä∏Ïóê ÎåÄÌïú ÏÉÅÏÑ∏ ÏÑ§Î™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required></textarea>
                </div>
                <button type="submit">ÌÉÄÏûÑÎùºÏù∏ Ïù¥Î≤§Ìä∏ Ï∂îÍ∞Ä</button>
            </form>
            <div id="archive-timeline-message"></div>
        </div>

        <div class="management-card">
            <h2 class="card-title">üé¨ ÌîÑÎ°úÏ†ùÌä∏ ÏòÅÏÉÅ</h2>
            <form id="archive-video-form" class="form-section">
                <div class="form-group">
                    <label for="archive-video-title">ÏòÅÏÉÅ Ï†úÎ™©</label>
                    <input type="text" id="archive-video-title" placeholder="ÌîÑÎ°úÏ†ùÌä∏ Ìã∞Ï†Ä ÏòÅÏÉÅ" required />
                </div>
                <div class="form-group">
                    <label for="archive-video-description">ÏòÅÏÉÅ ÏÑ§Î™Ö</label>
                    <textarea id="archive-video-description" rows="3" placeholder="ÏòÅÏÉÅÏóê ÎåÄÌïú ÏÑ§Î™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required></textarea>
                </div>
                <div class="form-group">
                    <label for="archive-video-url">YouTube URL</label>
                    <input type="url" id="archive-video-url" placeholder="https://www.youtube.com/watch?v=..." required />
                </div>
                <div class="form-group">
                    <label for="archive-video-duration">ÏòÅÏÉÅ Í∏∏Ïù¥</label>
                    <input type="text" id="archive-video-duration" placeholder="2:30" required />
                </div>
                <button type="submit">ÏòÅÏÉÅ Ï∂îÍ∞Ä</button>
            </form>
            <div id="archive-video-message"></div>
        </div>

        <div class="management-card">
            <h2 class="card-title">üì∏ ÏïÑÏπ¥Ïù¥Î∏å Í∞§Îü¨Î¶¨</h2>
            <form id="archive-gallery-form" class="form-section">
                <div class="form-group">
                    <label for="archive-gallery-image">ÏÇ¨ÏßÑ ÏÑ†ÌÉù</label>
                    <input type="file" id="archive-gallery-image" accept="image/*" required />
                    <div id="archive-gallery-file-info" class="file-info"></div>
                </div>
                <div class="form-group">
                    <label for="archive-gallery-title">ÏÇ¨ÏßÑ Ï†úÎ™©</label>
                    <input type="text" id="archive-gallery-title" placeholder="Ï≤´ Î≤àÏß∏ Ï¥¨ÏòÅ ÌòÑÏû•" required />
                </div>
                <div class="form-group">
                    <label for="archive-gallery-description">ÏÇ¨ÏßÑ ÏÑ§Î™Ö</label>
                    <textarea id="archive-gallery-description" rows="3" placeholder="ÏÇ¨ÏßÑÏóê ÎåÄÌïú ÏÑ§Î™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required></textarea>
                </div>
                <div class="form-group">
                    <label for="archive-gallery-category">Ïπ¥ÌÖåÍ≥†Î¶¨</label>
                    <select id="archive-gallery-category" required>
                        <option value="">Ïπ¥ÌÖåÍ≥†Î¶¨ ÏÑ†ÌÉù</option>
                        <option value="production">Ï†úÏûë ÌòÑÏû•</option>
                        <option value="interview">Ïù∏ÌÑ∞Î∑∞</option>
                        <option value="daily">ÏùºÏÉÅ</option>
                        <option value="document">ÏûêÎ£å</option>
                    </select>
                </div>
                <button type="submit">Í∞§Îü¨Î¶¨Ïóê Ï∂îÍ∞Ä</button>
            </form>
            <div id="archive-gallery-message"></div>
        </div>
    </div>

    <div class="management-card">
        <h2 class="card-title">üìä ÏïÑÏπ¥Ïù¥Î∏å Ïª®ÌÖêÏ∏† Í¥ÄÎ¶¨</h2>
        <div class="content-list">
            <h4 style="color: #8d6e63;">ÌÉÄÏûÑÎùºÏù∏ Ïù¥Î≤§Ìä∏</h4>
            <div id="archive-timeline-list"></div>
            <h4 style="color: #8d6e63; margin-top: 30px;">ÌîÑÎ°úÏ†ùÌä∏ ÏòÅÏÉÅ</h4>
            <div id="archive-video-list"></div>
            <h4 style="color: #8d6e63; margin-top: 30px;">Í∞§Îü¨Î¶¨ Ïù¥ÎØ∏ÏßÄ</h4>
            <div id="archive-gallery-list"></div>
            <button type="button" id="refresh-archive-btn" class="action-btn secondary-btn" style="width: 100%; margin-top: 20px;">
                ÏïÑÏπ¥Ïù¥Î∏å Ïª®ÌÖêÏ∏† ÏÉàÎ°úÍ≥†Ïπ®
            </button>
        </div>
    </div>
</div>

<div id="chatbot-tab" class="tab-content">
    <div class="management-grid">
        <div class="management-card">
            <h2 class="card-title">üìä ÎåÄÌôî ÌÜµÍ≥Ñ</h2>
            <div style="padding: 15px;">
                <div class="content-item">
                    <span style="color: #8d6e63;">Ï¥ù ÎåÄÌôî Ïàò:</span>
                    <span id="total-chats" style="color: #f5f0e6; font-weight: bold; float: right;">Î°úÎî© Ï§ë...</span>
                </div>
                <div class="content-item">
                    <span style="color: #8d6e63;">ÌôúÏÑ± ÏÇ¨Ïö©Ïûê:</span>
                    <span id="active-users" style="color: #f5f0e6; font-weight: bold; float: right;">Î°úÎî© Ï§ë...</span>
                </div>
                <div class="content-item">
                    <span style="color: #8d6e63;">Ïò§Îäò ÎåÄÌôî:</span>
                    <span id="today-chats" style="color: #f5f0e6; font-weight: bold; float: right;">Î°úÎî© Ï§ë...</span>
                </div>
            </div>
            <button type="button" id="refresh-stats-btn" class="action-btn secondary-btn" style="width: 100%;">
                ÌÜµÍ≥Ñ ÏÉàÎ°úÍ≥†Ïπ®
            </button>
        </div>

        <div class="management-card">
            <h2 class="card-title">üò¢ Í∞êÏ†ï Î∂ÑÏÑù</h2>
            <div id="emotion-analysis" class="content-list">
                <p style="text-align: center; color: #8d6e63;">Í∞êÏ†ï Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Îäî Ï§ë...</p>
            </div>
            <button type="button" id="refresh-emotions-btn" class="action-btn secondary-btn" style="width: 100%;">
                Í∞êÏ†ï Î∂ÑÏÑù ÏÉàÎ°úÍ≥†Ïπ®
            </button>
        </div>

        <div class="management-card">
            <h2 class="card-title">üö® Í∏¥Í∏â ÏÉÅÌô©</h2>
            <div id="urgent-messages" class="content-list">
                <p style="text-align: center; color: #8d6e63;">Í∏¥Í∏â Î©îÏãúÏßÄÎ•º ÌôïÏù∏ÌïòÎäî Ï§ë...</p>
            </div>
            <button type="button" id="refresh-urgent-btn" class="action-btn danger-btn" style="width: 100%;">
                Í∏¥Í∏â ÏÉÅÌô© ÏÉàÎ°úÍ≥†Ïπ®
            </button>
        </div>
    </div>

    <div class="management-grid">
        <div class="management-card">
            <h2 class="card-title">üí¨ ÏµúÍ∑º ÎåÄÌôî</h2>
            <div id="recent-chats" class="content-list">
                <p style="text-align: center; color: #8d6e63;">ÏµúÍ∑º ÎåÄÌôîÎ•º Î∂àÎü¨Ïò§Îäî Ï§ë...</p>
            </div>
            <button type="button" id="refresh-chats-btn" class="action-btn secondary-btn" style="width: 100%;">
                ÎåÄÌôî Í∏∞Î°ù ÏÉàÎ°úÍ≥†Ïπ®
            </button>
        </div>

        <div class="management-card">
            <h2 class="card-title">üìà Ï£ºÏ†úÎ≥Ñ Î∂ÑÏÑù</h2>
            <div id="topic-analysis" class="content-list">
                <p style="text-align: center; color: #8d6e63;">Ï£ºÏ†ú Î∂ÑÏÑù Ï§ë...</p>
            </div>
            <button type="button" id="refresh-topics-btn" class="action-btn secondary-btn" style="width: 100%;">
                Ï£ºÏ†ú Î∂ÑÏÑù ÏÉàÎ°úÍ≥†Ïπ®
            </button>
        </div>

        <div class="management-card">
            <h2 class="card-title">üîß ÏãúÏä§ÌÖú Î°úÍ∑∏</h2>
            <div id="system-logs" class="content-list">
                <p style="text-align: center; color: #8d6e63;">ÏãúÏä§ÌÖú Î°úÍ∑∏Î•º Î∂àÎü¨Ïò§Îäî Ï§ë...</p>
            </div>
            <button type="button" id="refresh-logs-btn" class="action-btn secondary-btn" style="width: 100%;">
                Î°úÍ∑∏ ÏÉàÎ°úÍ≥†Ïπ®
            </button>
        </div>
    </div>
</div>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp, getDocs, query, orderBy, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
import { getStorage, ref, uploadBytes, getDownloadURL, uploadBytesResumable } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-storage.js";

const firebaseConfig = {
  apiKey: "AIzaSyAIU8q64ZB6g8D72SPcCxxkOQmhtREN9cg",
  authDomain: "we-are-psychopath.firebaseapp.com",
  projectId: "we-are-psychopath",
  storageBucket: "we-are-psychopath.firebasestorage.app",
  messagingSenderId: "1020831167882",
  appId: "1:1020831167882:web:addcfd266307c3bb71c473",
  measurementId: "G-MG2X69DDK8"
};

const MASTER_KEY = "3292";

const loginSection = document.getElementById("login-section");
const adminPanel = document.getElementById("admin-panel");
const masterKeyInput = document.getElementById("master-key");
const loginBtn = document.getElementById("login-btn");
const logoutBtn = document.getElementById("logout-btn");
const loginMessage = document.getElementById("login-message");

let app, db, storage;

// Firebase Ï¥àÍ∏∞Ìôî Ìï®Ïàò
async function initializeFirebase() {
  try {
    if (!app) {
      app = initializeApp(firebaseConfig);
      db = getFirestore(app);
      storage = getStorage(app);
      
      window.db = db;
      window.storage = storage;
      
      console.log("‚úÖ Firebase Ï¥àÍ∏∞Ìôî ÏÑ±Í≥µ:", { db, storage });
      return true;
    }
    return true;
  } catch (error) {
    console.error("‚ùå Firebase Ï¥àÍ∏∞Ìôî Ïã§Ìå®:", error);
    return false;
  }
}

// ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Firebase Ï¥àÍ∏∞Ìôî
document.addEventListener("DOMContentLoaded", async () => {
    console.log("üîÑ ÌéòÏù¥ÏßÄ Î°úÎìú - Firebase Ï¥àÍ∏∞Ìôî ÏãúÏûë");
    await initializeFirebase();
});

// Î°úÍ∑∏Ïù∏ Ï≤òÎ¶¨
async function handleLogin() {
    const inputKey = masterKeyInput.value.trim();
    console.log("üîê Î°úÍ∑∏Ïù∏ ÏãúÎèÑ:", inputKey);
    
    if (inputKey === MASTER_KEY) {
        showMessage(loginMessage, "Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ!", "success");
        
        // Firebase Ïû¨ÌôïÏù∏
        const firebaseReady = await initializeFirebase();
        console.log("üî• Firebase ÏÉÅÌÉú:", firebaseReady);
        
        // ÎîîÎ≤ÑÍ∑∏: Firebase Í∞ùÏ≤¥ ÏÉÅÌÉú ÌôïÏù∏
        console.log("DB Í∞ùÏ≤¥:", window.db);
        console.log("Storage Í∞ùÏ≤¥:", window.storage);
        
        setTimeout(() => {
            loginSection.classList.add("hidden");
            adminPanel.classList.remove("hidden");
            
            if (firebaseReady) {
                initializeForms();
                loadAllContent();
                console.log("‚úÖ Í¥ÄÎ¶¨Ïûê Ìå®ÎÑê Ï§ÄÎπÑ ÏôÑÎ£å");
            } else {
                console.error("‚ùå Firebase Ï¥àÍ∏∞Ìôî Ïã§Ìå®Î°ú ÏùºÎ∂Ä Í∏∞Îä•Ïù¥ ÏûëÎèôÌïòÏßÄ ÏïäÏùÑ Ïàò ÏûàÏäµÎãàÎã§");
            }
        }, 500);
    } else {
        showMessage(loginMessage, "ÎßàÏä§ÌÑ∞ÌÇ§Í∞Ä Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏäµÎãàÎã§.", "error");
        console.log("‚ùå ÌÇ§ Î∂àÏùºÏπò");
    }
}

loginBtn.addEventListener("click", handleLogin);

masterKeyInput.addEventListener("keypress", (e) => {
    if (e.key === "Enter") {
        handleLogin();
    }
});

logoutBtn.addEventListener("click", () => {
    if (confirm("Î°úÍ∑∏ÏïÑÏõÉ ÌïòÏãúÍ≤†ÏäµÎãàÍπå?")) {
        adminPanel.classList.add("hidden");
        loginSection.classList.remove("hidden");
        masterKeyInput.value = "";
        clearAllForms();
    }
});

// ÌÉ≠ Ï†ÑÌôò Ìï®Ïàò
window.showTab = function(tabName) {
    document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
    
    event.target.classList.add('active');
    document.getElementById(tabName + '-tab').classList.add('active');
};

// Ìèº Ï¥àÍ∏∞Ìôî
function initializeForms() {
    console.log("üìù Ìèº Ï¥àÍ∏∞Ìôî ÏãúÏûë");
    
    // ÏùºÍ∏∞ Ìèº
    const diaryForm = document.getElementById("diary-form");
    if (diaryForm) {
        diaryForm.addEventListener("submit", handleDiarySubmit);
    }
    
    // ÌÉÄÏûÑÎùºÏù∏ Ìèº
    const timelineForm = document.getElementById("timeline-form");
    if (timelineForm) {
        timelineForm.addEventListener("submit", handleTimelineSubmit);
    }
    
    // Í∞§Îü¨Î¶¨ Ìèº
    const galleryForm = document.getElementById("gallery-form");
    if (galleryForm) {
        galleryForm.addEventListener("submit", handleGallerySubmit);
    }
    
    // ÎπÑÎîîÏò§ Ìèº
    const videoForm = document.getElementById("video-form");
    if (videoForm) {
        videoForm.addEventListener("submit", handleVideoSubmit);
        
        const videoTypeRadios = document.querySelectorAll('input[name="video-type"]');
        const youtubeInput = document.getElementById("youtube-input");
        const fileInput = document.getElementById("file-input");
        
        videoTypeRadios.forEach(radio => {
            radio.addEventListener("change", () => {
                if (radio.value === "youtube") {
                    youtubeInput.style.display = "block";
                    fileInput.style.display = "none";
                } else {
                    youtubeInput.style.display = "none";
                    fileInput.style.display = "block";
                }
            });
        });
    }
    
    // ÏïÑÏπ¥Ïù¥Î∏å ÌèºÎì§
    initializeArchiveForms();
    
    console.log("‚úÖ Ìèº Ï¥àÍ∏∞Ìôî ÏôÑÎ£å");
}

// ÏùºÍ∏∞ Ï†úÏ∂ú Ï≤òÎ¶¨
async function handleDiarySubmit(e) {
    e.preventDefault();
    console.log("üìù ÏùºÍ∏∞ Ï†úÏ∂ú Ï≤òÎ¶¨ ÏãúÏûë");
    
    const title = document.getElementById("diary-title").value.trim();
    const content = document.getElementById("diary-content").value.trim();
    const isPrivate = document.getElementById("diary-private").checked;
    
    if (!title || !content) {
        showMessage(document.getElementById("diary-message"), "Ï†úÎ™©Í≥º ÎÇ¥Ïö©ÏùÑ Î™®Îëê ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.", "error");
        return;
    }
    
    if (!window.db) {
        showMessage(document.getElementById("diary-message"), "FirebaseÍ∞Ä Ï¥àÍ∏∞ÌôîÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.", "error");
        return;
    }
    
    try {
        console.log("üíæ FirestoreÏóê ÏùºÍ∏∞ Ï†ÄÏû• Ï§ë...");
        await addDoc(collection(window.db, "diaryPosts"), {
            title,
            content,
            author: "Ï£ºÏùÄ",
            isPublic: !isPrivate,
            timestamp: serverTimestamp(),
            secretPassword: isPrivate ? "3292" : ""
        });
        
        showMessage(document.getElementById("diary-message"), "ÏùºÍ∏∞Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Îì±Î°ùÎêòÏóàÏäµÎãàÎã§!", "success");
        document.getElementById("diary-form").reset();
        console.log("‚úÖ ÏùºÍ∏∞ Ï†ÄÏû• ÏôÑÎ£å");
    } catch (error) {
        console.error("‚ùå ÏùºÍ∏∞ Îì±Î°ù Ïò§Î•ò:", error);
        showMessage(document.getElementById("diary-message"), "ÏùºÍ∏∞ Îì±Î°ù Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: " + error.message, "error");
    }
}

// ÌÉÄÏûÑÎùºÏù∏ Ï†úÏ∂ú Ï≤òÎ¶¨
async function handleTimelineSubmit(e) {
    e.preventDefault();
    console.log("‚è∞ ÌÉÄÏûÑÎùºÏù∏ Ï†úÏ∂ú Ï≤òÎ¶¨ ÏãúÏûë");
    
    const date = document.getElementById("timeline-date").value;
    const content = document.getElementById("timeline-content").value.trim();
    
    if (!date || !content) {
        showMessage(document.getElementById("timeline-message"), "ÎÇ†ÏßúÏôÄ ÎÇ¥Ïö©ÏùÑ Î™®Îëê ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.", "error");
        return;
    }
    
    if (!window.db) {
        showMessage(document.getElementById("timeline-message"), "FirebaseÍ∞Ä Ï¥àÍ∏∞ÌôîÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.", "error");
        return;
    }
    
    try {
        console.log("üíæ FirestoreÏóê ÌÉÄÏûÑÎùºÏù∏ Ïù¥Î≤§Ìä∏ Ï†ÄÏû• Ï§ë...");
        await addDoc(collection(window.db, "timelineEvents"), {
            start: date,
            content,
            timestamp: serverTimestamp()
        });
        
        showMessage(document.getElementById("timeline-message"), "ÌÉÄÏûÑÎùºÏù∏ Ïù¥Î≤§Ìä∏Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§!", "success");
        document.getElementById("timeline-form").reset();
        console.log("‚úÖ ÌÉÄÏûÑÎùºÏù∏ Ïù¥Î≤§Ìä∏ Ï†ÄÏû• ÏôÑÎ£å");
    } catch (error) {
        console.error("‚ùå ÌÉÄÏûÑÎùºÏù∏ Ïù¥Î≤§Ìä∏ Ï∂îÍ∞Ä Ïò§Î•ò:", error);
        showMessage(document.getElementById("timeline-message"), "Ïù¥Î≤§Ìä∏ Ï∂îÍ∞Ä Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: " + error.message, "error");
    }
}

// Í∞§Îü¨Î¶¨ Ï†úÏ∂ú Ï≤òÎ¶¨
async function handleGallerySubmit(e) {
    e.preventDefault();
    console.log("üì∏ Í∞§Îü¨Î¶¨ Ï†úÏ∂ú Ï≤òÎ¶¨ ÏãúÏûë");
    
    const imageFile = document.getElementById("gallery-image").files[0];
    const caption = document.getElementById("gallery-caption").value.trim();
    
    if (!imageFile || !caption) {
        showMessage(document.getElementById("gallery-message"), "Ïù¥ÎØ∏ÏßÄÏôÄ ÏÑ§Î™ÖÏùÑ Î™®Îëê ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.", "error");
        return;
    }
    
    if (!window.db || !window.storage) {
        showMessage(document.getElementById("gallery-message"), "FirebaseÍ∞Ä Ï¥àÍ∏∞ÌôîÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.", "error");
        return;
    }
    
    try {
        console.log("üì§ Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú Ï§ë...");
        const storageRef = ref(window.storage, `gallery/${imageFile.name}_${Date.now()}`);
        await uploadBytes(storageRef, imageFile);
        const imageUrl = await getDownloadURL(storageRef);
        
        console.log("üíæ FirestoreÏóê Í∞§Îü¨Î¶¨ Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû• Ï§ë...");
        await addDoc(collection(window.db, "galleryPosts"), {
            imageUrl,
            caption,
            timestamp: serverTimestamp()
        });
        
        showMessage(document.getElementById("gallery-message"), "ÏÇ¨ÏßÑÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏóÖÎ°úÎìúÎêòÏóàÏäµÎãàÎã§!", "success");
        document.getElementById("gallery-form").reset();
        console.log("‚úÖ Í∞§Îü¨Î¶¨ ÏóÖÎ°úÎìú ÏôÑÎ£å");
    } catch (error) {
        console.error("‚ùå ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú Ïò§Î•ò:", error);
        showMessage(document.getElementById("gallery-message"), "ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: " + error.message, "error");
    }
}

// ÎπÑÎîîÏò§ Ï†úÏ∂ú Ï≤òÎ¶¨
async function handleVideoSubmit(e) {
    e.preventDefault();
    console.log("üé• ÎπÑÎîîÏò§ Ï†úÏ∂ú Ï≤òÎ¶¨ ÏãúÏûë");
    
    const title = document.getElementById("video-title").value.trim();
    const description = document.getElementById("video-description").value.trim();
    const videoType = document.querySelector('input[name="video-type"]:checked').value;
    
    if (!title) {
        showMessage(document.getElementById("video-message"), "ÏòÅÏÉÅ Ï†úÎ™©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.", "error");
        return;
    }
    
    if (!window.db) {
        showMessage(document.getElementById("video-message"), "FirebaseÍ∞Ä Ï¥àÍ∏∞ÌôîÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.", "error");
        return;
    }
    
    try {
        let videoUrl = "";
        let isYoutube = false;
        
        if (videoType === "youtube") {
            const youtubeUrl = document.getElementById("youtube-url").value.trim();
            if (!youtubeUrl) {
                showMessage(document.getElementById("video-message"), "YouTube ÎßÅÌÅ¨Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.", "error");
                return;
            }
            videoUrl = youtubeUrl;
            isYoutube = true;
        } else {
            const videoFile = document.getElementById("video-file").files[0];
            if (!videoFile) {
                showMessage(document.getElementById("video-message"), "ÎπÑÎîîÏò§ ÌååÏùºÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.", "error");
                return;
            }
            
            console.log("üì§ ÎπÑÎîîÏò§ ÌååÏùº ÏóÖÎ°úÎìú Ï§ë...");
            const storageRef = ref(window.storage, `campaignVideos/${videoFile.name}_${Date.now()}`);
            await uploadBytes(storageRef, videoFile);
            videoUrl = await getDownloadURL(storageRef);
        }
        
        console.log("üíæ FirestoreÏóê ÎπÑÎîîÏò§ Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû• Ï§ë...");
        await addDoc(collection(window.db, "campaignVideos"), {
            title,
            description,
            videoUrl,
            isYoutube,
            timestamp: serverTimestamp()
        });
        
        showMessage(document.getElementById("video-message"), "ÏòÅÏÉÅÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏóÖÎ°úÎìúÎêòÏóàÏäµÎãàÎã§!", "success");
        document.getElementById("video-form").reset();
        console.log("‚úÖ ÎπÑÎîîÏò§ ÏóÖÎ°úÎìú ÏôÑÎ£å");
    } catch (error) {
        console.error("‚ùå ÏòÅÏÉÅ ÏóÖÎ°úÎìú Ïò§Î•ò:", error);
        showMessage(document.getElementById("video-message"), "ÏòÅÏÉÅ ÏóÖÎ°úÎìú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: " + error.message, "error");
    }
}

// ÏïÑÏπ¥Ïù¥Î∏å Ìèº Ï¥àÍ∏∞Ìôî
function initializeArchiveForms() {
    // ÏïÑÏπ¥Ïù¥Î∏å ÌÉÄÏûÑÎùºÏù∏ Ìèº
    const archiveTimelineForm = document.getElementById("archive-timeline-form");
    if (archiveTimelineForm) {
        archiveTimelineForm.addEventListener("submit", async (e) => {
            e.preventDefault();
            const date = document.getElementById("archive-event-date").value;
            const title = document.getElementById("archive-event-title").value.trim();
            const description = document.getElementById("archive-event-description").value.trim();
            
            if (!date || !title || !description) {
                showMessage(document.getElementById("archive-timeline-message"), "Î™®Îì† ÌïÑÎìúÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.", "error");
                return;
            }
            
            if (!window.db) {
                showMessage(document.getElementById("archive-timeline-message"), "FirebaseÍ∞Ä Ï¥àÍ∏∞ÌôîÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.", "error");
                return;
            }
            
            try {
                await addDoc(collection(window.db, "archiveTimeline"), {
                    date, title, description, timestamp: serverTimestamp()
                });
                showMessage(document.getElementById("archive-timeline-message"), "ÌÉÄÏûÑÎùºÏù∏ Ïù¥Î≤§Ìä∏Í∞Ä Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§!", "success");
                document.getElementById("archive-timeline-form").reset();
                loadArchiveTimeline();
            } catch (error) {
                console.error("ÏïÑÏπ¥Ïù¥Î∏å ÌÉÄÏûÑÎùºÏù∏ Ïù¥Î≤§Ìä∏ Ï∂îÍ∞Ä Ïò§Î•ò:", error);
                showMessage(document.getElementById("archive-timeline-message"), "Ïù¥Î≤§Ìä∏ Ï∂îÍ∞Ä Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: " + error.message, "error");
            }
        });
    }
    
    // ÏÉàÎ°úÍ≥†Ïπ® Î≤ÑÌäº
    const refreshArchiveBtn = document.getElementById("refresh-archive-btn");
    if (refreshArchiveBtn) {
        refreshArchiveBtn.addEventListener("click", () => {
            loadArchiveTimeline();
            loadArchiveVideos();
            loadArchiveGallery();
        });
    }
}

// ÏïÑÏπ¥Ïù¥Î∏å Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ìï®ÏàòÎì§
async function loadArchiveTimeline() {
    try {
        const listEl = document.getElementById("archive-timeline-list");
        if (!listEl || !window.db) return;
        
        listEl.innerHTML = "<p style='text-align: center; color: #8d6e63;'>ÌÉÄÏûÑÎùºÏù∏ÏùÑ Î∂àÎü¨Ïò§Îäî Ï§ë...</p>";
        
        const snaps = await getDocs(query(collection(window.db, "archiveTimeline"), orderBy("date", "desc")));
        listEl.innerHTML = "";
        
        if (snaps.empty) {
            listEl.innerHTML = "<p style='text-align: center; color: #f5f0e6; font-style: italic;'>Îì±Î°ùÎêú ÌÉÄÏûÑÎùºÏù∏ Ïù¥Î≤§Ìä∏Í∞Ä ÏóÜÏäµÎãàÎã§.</p>";
            return;
        }
        
        snaps.forEach(docSnap => {
            const { date, title, description } = docSnap.data();
            const id = docSnap.id;

            const div = document.createElement("div");
            div.className = "content-item";
            div.innerHTML = `
                <h4>${title}</h4>
                <p>üìÖ ${date}</p>
                <p>${description}</p>
                <div class="content-actions">
                    <button onclick="deleteArchiveItem('archiveTimeline', '${id}')" class="danger-btn">ÏÇ≠Ï†ú</button>
                </div>
            `;
            listEl.appendChild(div);
        });
        
        console.log("‚úÖ ÏïÑÏπ¥Ïù¥Î∏å ÌÉÄÏûÑÎùºÏù∏ Î°úÎìú ÏôÑÎ£å");
    } catch (error) {
        console.error("‚ùå ÌÉÄÏûÑÎùºÏù∏ Î°úÎìú Ïò§Î•ò:", error);
        const listEl = document.getElementById("archive-timeline-list");
        if (listEl) {
            listEl.innerHTML = "<p style='color: #dc3545;'>ÌÉÄÏûÑÎùºÏù∏ Î°úÎìú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: " + error.message + "</p>";
        }
    }
}

async function loadArchiveVideos() {
    console.log("üìπ ÏïÑÏπ¥Ïù¥Î∏å ÎπÑÎîîÏò§ Î°úÎìú Ï§ë...");
}

async function loadArchiveGallery() {
    console.log("üñºÔ∏è ÏïÑÏπ¥Ïù¥Î∏å Í∞§Îü¨Î¶¨ Î°úÎìú Ï§ë...");
}

// ÏïÑÏπ¥Ïù¥Î∏å ÏïÑÏù¥ÌÖú ÏÇ≠Ï†ú
window.deleteArchiveItem = async function(collectionName, itemId) {
    if (!confirm("Ï†ïÎßê Ïù¥ Ìï≠Î™©ÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?")) return;
    
    try {
        if (!window.db) {
            throw new Error("FirebaseÍ∞Ä Ï¥àÍ∏∞ÌôîÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§");
        }
        
        await deleteDoc(doc(window.db, collectionName, itemId));
        showMessage(document.getElementById("archive-timeline-message"), "Ìï≠Î™©Ïù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§!", "success");
        
        if (collectionName === 'archiveTimeline') loadArchiveTimeline();
        else if (collectionName === 'archiveVideos') loadArchiveVideos();
        else if (collectionName === 'archiveGallery') loadArchiveGallery();
        
        console.log("‚úÖ ÏïÑÏù¥ÌÖú ÏÇ≠Ï†ú ÏôÑÎ£å:", itemId);
    } catch (error) {
        console.error("‚ùå ÏÇ≠Ï†ú Ïò§Î•ò:", error);
        showMessage(document.getElementById("archive-timeline-message"), "ÏÇ≠Ï†ú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: " + error.message, "error");
    }
};

// Ïª®ÌÖêÏ∏† Î°úÎìú
function loadAllContent() {
    console.log("üìä Î™®Îì† Ïª®ÌÖêÏ∏† Î°úÎìú ÏãúÏûë");
    loadArchiveTimeline();
    loadArchiveVideos();
    loadArchiveGallery();
    loadChatbotStats();
}

// Ï±óÎ¥á ÌÜµÍ≥Ñ Î°úÎìú
async function loadChatbotStats() {
    try {
        if (!window.db) {
            console.warn("‚ö†Ô∏è Firebase DBÍ∞Ä Ï¥àÍ∏∞ÌôîÎêòÏßÄ ÏïäÏùå");
            return;
        }
        
        console.log("üìä Ï±óÎ¥á ÌÜµÍ≥Ñ Î°úÎìú Ï§ë...");
        
        // Í∏∞Î≥∏ ÌÜµÍ≥Ñ Î°úÎìú
        const totalChatsEl = document.getElementById("total-chats");
        const activeUsersEl = document.getElementById("active-users");
        const todayChatsEl = document.getElementById("today-chats");
        
        if (totalChatsEl) totalChatsEl.textContent = "Î°úÎî© Ï§ë...";
        if (activeUsersEl) activeUsersEl.textContent = "Î°úÎî© Ï§ë...";
        if (todayChatsEl) todayChatsEl.textContent = "Î°úÎî© Ï§ë...";
        
        // Ïã§Ï†ú Îç∞Ïù¥ÌÑ∞ Î°úÎìú
        const chatHistorySnaps = await getDocs(collection(window.db, "chatHistory"));
        const totalChats = chatHistorySnaps.size;
        
        if (totalChatsEl) totalChatsEl.textContent = totalChats;
        if (activeUsersEl) activeUsersEl.textContent = "Îç∞Ïù¥ÌÑ∞ ÏàòÏßë Ï§ë";
        if (todayChatsEl) todayChatsEl.textContent = "Îç∞Ïù¥ÌÑ∞ ÏàòÏßë Ï§ë";
        
        console.log("‚úÖ Ï±óÎ¥á ÌÜµÍ≥Ñ Î°úÎìú ÏôÑÎ£å:", { totalChats });
        
    } catch (error) {
        console.error("‚ùå Ï±óÎ¥á ÌÜµÍ≥Ñ Î°úÎìú Ïò§Î•ò:", error);
        const totalChatsEl = document.getElementById("total-chats");
        if (totalChatsEl) totalChatsEl.textContent = "Ïò§Î•ò";
    }
}

// Î©îÏãúÏßÄ ÌëúÏãú Ìï®Ïàò
function showMessage(element, message, type) {
    if (!element) return;
    element.innerHTML = `<div class="status-message ${type}">${message}</div>`;
    setTimeout(() => {
        element.innerHTML = "";
    }, 5000);
}

// Î™®Îì† Ìèº Ï¥àÍ∏∞Ìôî
function clearAllForms() {
    const forms = ['diary-form', 'timeline-form', 'gallery-form', 'video-form'];
    forms.forEach(formId => {
        const form = document.getElementById(formId);
        if (form) form.reset();
    });
    
    document.querySelectorAll('[id$="-message"]').forEach(el => {
        el.innerHTML = "";
    });
}

console.log("üöÄ Admin Ïä§ÌÅ¨Î¶ΩÌä∏ Î°úÎìú ÏôÑÎ£å");
</script>
</body>
</html>