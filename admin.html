<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ê°ë… ê´€ë¦¬ íŒ¨ë„</title>
<link href="community.css" rel="stylesheet" />
<style>
body {
    background-color: #4e2e1e;
    color: #f5f0e6;
    font-family: "Song Myung", serif;
}

.admin-panel {
    max-width: 1400px;
    margin: 0 auto;
    padding: 100px 20px 20px;
    font-family: "Song Myung", serif;
    background-color: #4e2e1e;
}

.panel-header {
    text-align: center;
    margin-bottom: 3rem;
    background: rgba(245, 240, 230, 0.05);
    padding: 2rem;
    border-radius: 12px;
    border-left: 4px solid #8d6e63;
}

.panel-header h1 {
    font-size: 2.5em;
    margin-bottom: 10px;
    color: #f5f0e6;
}

.panel-header p {
    color: #d4c4a8;
    font-size: 1.2em;
    margin: 0;
}

.management-tabs {
    display: flex;
    justify-content: center;
    margin-bottom: 3rem;
    background: rgba(245, 240, 230, 0.05);
    border-radius: 12px;
    padding: 15px;
    flex-wrap: wrap;
    gap: 10px;
}

.tab-button {
    padding: 12px 24px;
    background: rgba(245, 240, 230, 0.1);
    border: 1px solid rgba(245, 240, 230, 0.2);
    border-radius: 25px;
    color: #f5f0e6;
    cursor: pointer;
    font-family: "Song Myung", serif;
    font-size: 1.1em;
    transition: all 0.3s ease;
}

.tab-button:hover {
    background: rgba(245, 240, 230, 0.15);
    transform: translateY(-2px);
}

.tab-button.active {
    background: #8d6e63;
    border-color: #8d6e63;
    color: #f5f0e6;
}

.management-card {
    background: rgba(245, 240, 230, 0.05);
    border: 1px solid rgba(245, 240, 230, 0.1);
    border-left: 4px solid #8d6e63;
    border-radius: 12px;
    padding: 2rem;
    margin-bottom: 2rem;
    transition: all 0.3s ease;
}

.management-card:hover {
    background: rgba(245, 240, 230, 0.08);
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.card-title {
    color: #f5f0e6;
    font-size: 1.5em;
    margin-bottom: 1.5rem;
    text-align: center;
}

.form-section {
    margin-bottom: 2rem;
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    color: #d4c4a8;
    font-weight: bold;
    margin-bottom: 8px;
    font-size: 1.1em;
}

.form-section input,
.form-section textarea,
.form-section select {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid rgba(245, 240, 230, 0.2);
    border-radius: 8px;
    background: rgba(245, 240, 230, 0.1);
    color: #f5f0e6;
    font-family: "Song Myung", serif;
    font-size: 1em;
    transition: all 0.3s ease;
    box-sizing: border-box;
}

.form-section input:focus,
.form-section textarea:focus,
.form-section select:focus {
    outline: none;
    border-color: #8d6e63;
    background: rgba(245, 240, 230, 0.15);
    box-shadow: 0 0 15px rgba(141, 110, 99, 0.3);
}

.form-section textarea {
    resize: vertical;
    min-height: 100px;
    line-height: 1.6;
}

.form-section button,
.action-btn {
    padding: 12px 25px;
    background: #8d6e63;
    color: #f5f0e6;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    font-family: "Song Myung", serif;
    font-size: 1.1em;
    transition: all 0.3s ease;
    min-width: 140px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.form-section button:hover,
.action-btn:hover {
    background: #a1887f;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(141, 110, 99, 0.4);
}

.danger-btn {
    background: #dc3545 !important;
}

.danger-btn:hover {
    background: #c82333 !important;
    box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4) !important;
}

.secondary-btn {
    background: rgba(245, 240, 230, 0.1) !important;
    border: 1px solid rgba(245, 240, 230, 0.2) !important;
}

.secondary-btn:hover {
    background: rgba(245, 240, 230, 0.15) !important;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2) !important;
}

.login-section {
    max-width: 500px;
    margin: 200px auto;
    text-align: center;
    background: rgba(245, 240, 230, 0.05);
    padding: 3rem;
    border-radius: 12px;
    border-left: 4px solid #8d6e63;
}

.login-section h1 {
    color: #f5f0e6;
    font-size: 2.2em;
    margin-bottom: 20px;
}

.login-section p {
    color: #d4c4a8;
    font-size: 1.1em;
    line-height: 1.6;
    margin-bottom: 2rem;
}

.login-section input {
    width: 100%;
    max-width: 300px;
    padding: 15px 20px;
    margin: 15px 0;
    border: 1px solid rgba(245, 240, 230, 0.3);
    border-radius: 25px;
    background: rgba(245, 240, 230, 0.1);
    color: #f5f0e6;
    font-size: 1.1em;
    text-align: center;
    transition: all 0.3s ease;
}

.login-section input:focus {
    outline: none;
    border-color: #8d6e63;
    background: rgba(245, 240, 230, 0.15);
    box-shadow: 0 0 15px rgba(141, 110, 99, 0.3);
}

.login-section button {
    padding: 15px 30px;
    font-size: 1.2em;
    margin-top: 10px;
}

.logout-btn {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 10px 20px;
    background: #dc3545;
    color: #f5f0e6;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    font-family: "Song Myung", serif;
    font-size: 1em;
    z-index: 1000;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.logout-btn:hover {
    background: #c82333;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4);
}

.status-message {
    padding: 15px 20px;
    margin: 15px 0;
    border-radius: 8px;
    text-align: center;
    font-weight: bold;
    border-left: 4px solid;
}

.success {
    background: rgba(92, 184, 92, 0.2);
    color: #5cb85c;
    border-color: #5cb85c;
}

.error {
    background: rgba(217, 83, 79, 0.2);
    color: #d9534f;
    border-color: #d9534f;
}

.management-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 2rem;
    margin-bottom: 3rem;
}

.content-list {
    max-height: 400px;
    overflow-y: auto;
    margin: 20px 0;
    border-top: 1px solid rgba(245, 240, 230, 0.2);
    padding-top: 20px;
}

.content-item {
    background: rgba(245, 240, 230, 0.05);
    border-left: 4px solid #8d6e63;
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 8px;
    position: relative;
    transition: all 0.3s ease;
}

.content-item:hover {
    background: rgba(245, 240, 230, 0.1);
    transform: translateX(5px);
}

.content-item h4 {
    color: #f5f0e6;
    margin: 0 0 8px 0;
    padding-right: 120px;
}

.content-item p {
    color: #d4c4a8;
    margin: 5px 0 0 0;
    font-size: 0.9em;
    padding-right: 120px;
}

.content-actions {
    position: absolute;
    top: 15px;
    right: 15px;
    display: flex;
    gap: 8px;
}

.content-actions button {
    padding: 6px 12px;
    font-size: 0.85em;
    min-width: auto;
}

.progress-container {
    margin: 15px 0;
}

.progress-bar {
    background: rgba(245, 240, 230, 0.2);
    border-radius: 10px;
    overflow: hidden;
    height: 8px;
}

.progress-fill {
    background: #8d6e63;
    height: 100%;
    width: 0%;
    transition: width 0.3s ease;
}

.file-info {
    font-size: 0.9em;
    color: #d4c4a8;
    margin-top: 8px;
    font-style: italic;
}

.hidden {
    display: none !important;
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
    animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
    from { 
        opacity: 0; 
        transform: translateY(10px); 
    }
    to { 
        opacity: 1; 
        transform: translateY(0); 
    }
}

@media (max-width: 768px) {
    .admin-panel {
        padding: 120px 15px 20px;
    }
    
    .panel-header {
        padding: 1.5rem;
    }
    
    .panel-header h1 {
        font-size: 2em;
    }
    
    .management-tabs {
        flex-direction: column;
        align-items: center;
        gap: 8px;
    }
    
    .tab-button {
        width: 100%;
        max-width: 300px;
        text-align: center;
    }
    
    .management-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    
    .management-card {
        padding: 1.5rem;
    }
    
    .content-item h4,
    .content-item p {
        padding-right: 80px;
    }
    
    .content-actions {
        flex-direction: column;
        gap: 5px;
    }
    
    .login-section {
        margin: 120px auto;
        padding: 2rem;
    }
    
    .login-section h1 {
        font-size: 1.8em;
    }
}

@media (max-width: 480px) {
    .management-card {
        padding: 1rem;
    }
    
    .card-title {
        font-size: 1.3em;
    }
    
    .content-item h4,
    .content-item p {
        padding-right: 60px;
    }
    
    .content-actions button {
        padding: 4px 8px;
        font-size: 0.8em;
    }
    
    .logout-btn {
        top: 15px;
        right: 15px;
        padding: 8px 15px;
        font-size: 0.9em;
    }
}
</style>
</head>
<body class="song-myung-regular">

<div id="login-section" class="login-section">
<h1>ğŸ¬ ê°ë… ê´€ë¦¬ íŒ¨ë„</h1>
<p>
    ì´ í˜ì´ì§€ëŠ” ê°ë… ì „ìš©ì…ë‹ˆë‹¤.<br>
    ë§ˆìŠ¤í„°í‚¤ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.
</p>
<input type="password" id="master-key" placeholder="ë§ˆìŠ¤í„°í‚¤ ì…ë ¥" />
<br>
<button id="login-btn">ë¡œê·¸ì¸</button>
<div id="login-message" style="margin-top: 1rem;"></div>
</div>

<div id="admin-panel" class="admin-panel hidden">
<button class="logout-btn" id="logout-btn">ë¡œê·¸ì•„ì›ƒ</button>

<div class="panel-header">
    <h1>ğŸ¬ ê°ë… ê´€ë¦¬ íŒ¨ë„</h1>
    <p>ëª¨ë“  ì½˜í…ì¸ ë¥¼ í•œ ê³³ì—ì„œ ê´€ë¦¬í•˜ì„¸ìš”</p>
</div>

<div class="management-tabs">
    <button class="tab-button active" onclick="showTab('diary')">ğŸ“ ì¼ê¸°</button>
    <button class="tab-button" onclick="showTab('timeline')">â° íƒ€ì„ë¼ì¸</button>
    <button class="tab-button" onclick="showTab('gallery')">ğŸ“¸ ê°¤ëŸ¬ë¦¬</button>
    <button class="tab-button" onclick="showTab('video')">ğŸ¥ ì˜ìƒ</button>
    <button class="tab-button" onclick="showTab('archive')">ğŸ“‚ ì•„ì¹´ì´ë¸Œ</button>
    <button class="tab-button" onclick="showTab('mother')">ğŸ‘©â€ğŸ‘§ ì—„ë§ˆì˜ ì´ì•¼ê¸°</button>
    <button class="tab-button" onclick="showTab('chatbot')">ğŸ’¬ ì±—ë´‡ ë¶„ì„</button>
</div>

<div id="diary-tab" class="tab-content active">
    <div class="management-card">
        <h2 class="card-title">ğŸ“ ì¼ê¸° ì‘ì„±</h2>
        <form id="diary-form" class="form-section">
            <div class="form-group">
                <label for="diary-title">ì¼ê¸° ì œëª©</label>
                <input type="text" id="diary-title" placeholder="ì¼ê¸° ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required />
            </div>
            <div class="form-group">
                <label for="diary-content">ì¼ê¸° ë‚´ìš©</label>
                <textarea id="diary-content" rows="10" placeholder="ì˜¤ëŠ˜ì˜ ì¼ê¸°ë¥¼ ì¨ë³´ì„¸ìš”..." required></textarea>
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="diary-private"> ë¹„ê³µê°œ ê¸€ë¡œ ì‘ì„±
                </label>
            </div>
            <button type="submit">ì¼ê¸° ë“±ë¡</button>
        </form>
        <div id="diary-message"></div>
    </div>
</div>

<div id="timeline-tab" class="tab-content">
    <div class="management-card">
        <h2 class="card-title">â° íƒ€ì„ë¼ì¸ ì´ë²¤íŠ¸ ì¶”ê°€</h2>
        <form id="timeline-form" class="form-section">
            <div class="form-group">
                <label for="timeline-date">ë‚ ì§œ</label>
                <input type="date" id="timeline-date" required />
            </div>
            <div class="form-group">
                <label for="timeline-content">ì´ë²¤íŠ¸ ë‚´ìš©</label>
                <textarea id="timeline-content" rows="4" placeholder="íƒ€ì„ë¼ì¸ì— ì¶”ê°€í•  ì´ë²¤íŠ¸ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
            </div>
            <button type="submit">ì´ë²¤íŠ¸ ì¶”ê°€</button>
        </form>
        <div id="timeline-message"></div>
    </div>
</div>

<div id="gallery-tab" class="tab-content">
    <div class="management-card">
        <h2 class="card-title">ğŸ“¸ ì‚¬ì§„ ì—…ë¡œë“œ</h2>
        <form id="gallery-form" class="form-section">
            <div class="form-group">
                <label for="gallery-image">ì‚¬ì§„ ì„ íƒ</label>
                <input type="file" id="gallery-image" accept="image/*" required />
                <div id="gallery-file-info" class="file-info"></div>
            </div>
            <div class="form-group">
                <label for="gallery-caption">ì‚¬ì§„ ì„¤ëª…</label>
                <textarea id="gallery-caption" rows="3" placeholder="ì‚¬ì§„ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
            </div>
            <button type="submit">ì‚¬ì§„ ì—…ë¡œë“œ</button>
        </form>
        <div id="gallery-message"></div>
    </div>
</div>

<div id="video-tab" class="tab-content">
    <div class="management-card">
        <h2 class="card-title">ğŸ¥ ì˜ìƒ ì—…ë¡œë“œ</h2>
        <form id="video-form" class="form-section">
            <div class="form-group">
                <label for="video-title">ì˜ìƒ ì œëª©</label>
                <input type="text" id="video-title" placeholder="ì˜ìƒ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required />
            </div>
            <div class="form-group">
                <label for="video-description">ì˜ìƒ ì„¤ëª…</label>
                <textarea id="video-description" rows="3" placeholder="ì˜ìƒì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
            </div>
            
            <div class="form-group">
                <label>ì˜ìƒ ì—…ë¡œë“œ ë°©ì‹</label>
                <div style="margin: 10px 0;">
                    <label style="margin-right: 20px;">
                        <input type="radio" name="video-type" value="youtube" checked> YouTube ë§í¬
                    </label>
                    <label>
                        <input type="radio" name="video-type" value="file"> íŒŒì¼ ì—…ë¡œë“œ
                    </label>
                </div>
            </div>
            
            <div id="youtube-input" class="form-group">
                <label for="youtube-url">YouTube URL</label>
                <input type="url" id="youtube-url" placeholder="https://www.youtube.com/watch?v=..." />
            </div>
            
            <div id="file-input" class="form-group" style="display:none;">
                <label for="video-file">ë¹„ë””ì˜¤ íŒŒì¼</label>
                <input type="file" id="video-file" accept=".mp4,.webm,.mov,.avi,.mkv,.flv,video/*" />
                <div id="video-file-info" class="file-info"></div>
            </div>
            
            <button type="submit">ì˜ìƒ ì—…ë¡œë“œ</button>
        </form>
        <div id="video-message"></div>
    </div>
</div>

<div id="archive-tab" class="tab-content">
    <div class="management-grid">
        <div class="management-card">
            <h2 class="card-title">ğŸ“‚ íƒ€ì„ë¼ì¸ ì´ë²¤íŠ¸</h2>
            <form id="archive-timeline-form" class="form-section">
                <div class="form-group">
                    <label for="archive-event-date">ë‚ ì§œ</label>
                    <input type="date" id="archive-event-date" required />
                </div>
                <div class="form-group">
                    <label for="archive-event-title">ì´ë²¤íŠ¸ ì œëª©</label>
                    <input type="text" id="archive-event-title" placeholder="í”„ë¡œì íŠ¸ ì‹œì‘" required />
                </div>
                <div class="form-group">
                    <label for="archive-event-description">ì´ë²¤íŠ¸ ì„¤ëª…</label>
                    <textarea id="archive-event-description" rows="4" placeholder="ì´ë²¤íŠ¸ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
                </div>
                <button type="submit">íƒ€ì„ë¼ì¸ ì´ë²¤íŠ¸ ì¶”ê°€</button>
            </form>
            <div id="archive-timeline-message"></div>
        </div>

        <div class="management-card">
            <h2 class="card-title">ğŸ¬ í”„ë¡œì íŠ¸ ì˜ìƒ</h2>
            <form id="archive-video-form" class="form-section">
                <div class="form-group">
                    <label for="archive-video-title">ì˜ìƒ ì œëª©</label>
                    <input type="text" id="archive-video-title" placeholder="í”„ë¡œì íŠ¸ í‹°ì € ì˜ìƒ" required />
                </div>
                <div class="form-group">
                    <label for="archive-video-description">ì˜ìƒ ì„¤ëª…</label>
                    <textarea id="archive-video-description" rows="3" placeholder="ì˜ìƒì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
                </div>
                <div class="form-group">
                    <label for="archive-video-url">YouTube URL</label>
                    <input type="url" id="archive-video-url" placeholder="https://www.youtube.com/watch?v=..." required />
                </div>
                <div class="form-group">
                    <label for="archive-video-duration">ì˜ìƒ ê¸¸ì´</label>
                    <input type="text" id="archive-video-duration" placeholder="2:30" required />
                </div>
                <button type="submit">ì˜ìƒ ì¶”ê°€</button>
            </form>
            <div id="archive-video-message"></div>
        </div>

        <div class="management-card">
            <h2 class="card-title">ğŸ“¸ ì•„ì¹´ì´ë¸Œ ê°¤ëŸ¬ë¦¬</h2>
            <form id="archive-gallery-form" class="form-section">
                <div class="form-group">
                    <label for="archive-gallery-image">ì‚¬ì§„ ì„ íƒ</label>
                    <input type="file" id="archive-gallery-image" accept="image/*" required />
                    <div id="archive-gallery-file-info" class="file-info"></div>
                </div>
                <div class="form-group">
                    <label for="archive-gallery-title">ì‚¬ì§„ ì œëª©</label>
                    <input type="text" id="archive-gallery-title" placeholder="ì²« ë²ˆì§¸ ì´¬ì˜ í˜„ì¥" required />
                </div>
                <div class="form-group">
                    <label for="archive-gallery-description">ì‚¬ì§„ ì„¤ëª…</label>
                    <textarea id="archive-gallery-description" rows="3" placeholder="ì‚¬ì§„ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
                </div>
                <div class="form-group">
                    <label for="archive-gallery-category">ì¹´í…Œê³ ë¦¬</label>
                    <select id="archive-gallery-category" required>
                        <option value="">ì¹´í…Œê³ ë¦¬ ì„ íƒ</option>
                        <option value="production">ì œì‘ í˜„ì¥</option>
                        <option value="interview">ì¸í„°ë·°</option>
                        <option value="daily">ì¼ìƒ</option>
                        <option value="document">ìë£Œ</option>
                    </select>
                </div>
                <button type="submit">ê°¤ëŸ¬ë¦¬ì— ì¶”ê°€</button>
            </form>
            <div id="archive-gallery-message"></div>
        </div>
    </div>

    <div class="management-card">
        <h2 class="card-title">ğŸ“Š ì•„ì¹´ì´ë¸Œ ì»¨í…ì¸  ê´€ë¦¬</h2>
        <div class="content-list">
            <h4 style="color: #8d6e63;">íƒ€ì„ë¼ì¸ ì´ë²¤íŠ¸</h4>
            <div id="archive-timeline-list"></div>
            <h4 style="color: #8d6e63; margin-top: 30px;">í”„ë¡œì íŠ¸ ì˜ìƒ</h4>
            <div id="archive-video-list"></div>
            <h4 style="color: #8d6e63; margin-top: 30px;">ê°¤ëŸ¬ë¦¬ ì´ë¯¸ì§€</h4>
            <div id="archive-gallery-list"></div>
            <button type="button" id="refresh-archive-btn" class="action-btn secondary-btn" style="width: 100%; margin-top: 20px;">
                ì•„ì¹´ì´ë¸Œ ì»¨í…ì¸  ìƒˆë¡œê³ ì¹¨
            </button>
        </div>
    </div>
</div>

<div id="mother-tab" class="tab-content">
    <div class="management-grid">
        <div class="management-card">
            <h2 class="card-title">ğŸµ ìŒì•… ê´€ë¦¬</h2>
            <form id="mother-music-form" class="form-section">
                <div class="form-group">
                    <label for="music-title">ê³¡ ì œëª©</label>
                    <input type="text" id="music-title" placeholder="ê³¡ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required />
                </div>
                <div class="form-group">
                    <label for="music-url">YouTube ë§í¬</label>
                    <input type="url" id="music-url" placeholder="https://www.youtube.com/watch?v=..." required />
                </div>
                <button type="submit">ìŒì•… ì¶”ê°€</button>
            </form>
            <div class="content-list">
                <div id="mother-music-list"></div>
                <button type="button" id="refresh-music-btn" class="action-btn secondary-btn" style="width: 100%;">
                    ìŒì•… ëª©ë¡ ìƒˆë¡œê³ ì¹¨
                </button>
            </div>
            <div id="mother-music-message"></div>
        </div>
        
        <div class="management-card">
            <h2 class="card-title">ğŸ“· ì‚¬ì§„ ê´€ë¦¬</h2>
            <form id="mother-photo-form" class="form-section">
                <div class="form-group">
                    <label for="mother-photo">ì‚¬ì§„ ì„ íƒ</label>
                    <input type="file" id="mother-photo" accept="image/*" required />
                    <div id="mother-photo-file-info" class="file-info"></div>
                </div>
                <div class="form-group">
                    <label for="photo-caption">ì‚¬ì§„ ì„¤ëª…</label>
                    <textarea id="photo-caption" rows="3" placeholder="ì‚¬ì§„ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
                </div>
                <button type="submit">ì‚¬ì§„ ì¶”ê°€</button>
            </form>
            <div class="content-list">
                <div id="mother-photo-list"></div>
                <button type="button" id="refresh-photos-btn" class="action-btn secondary-btn" style="width: 100%;">
                    ì‚¬ì§„ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
                </button>
            </div>
            <div id="mother-photo-message"></div>
        </div>
        
        <div class="management-card">
            <h2 class="card-title">ğŸ’¬ ëŒ“ê¸€ ê´€ë¦¬</h2>
            <div class="content-list">
                <div id="mother-comments-list"></div>
                <button type="button" id="refresh-comments-btn" class="action-btn secondary-btn" style="width: 100%;">
                    ëŒ“ê¸€ ìƒˆë¡œê³ ì¹¨
                </button>
            </div>
            <div id="mother-comments-message"></div>
        </div>
    </div>
</div>

<div id="chatbot-tab" class="tab-content">
    <div class="management-grid">
        <div class="management-card">
            <h2 class="card-title">ğŸ“Š ëŒ€í™” í†µê³„</h2>
            <div style="padding: 15px;">
                <div class="content-item">
                    <span style="color: #8d6e63;">ì´ ëŒ€í™” ìˆ˜:</span>
                    <span id="total-chats" style="color: #f5f0e6; font-weight: bold; float: right;">ë¡œë”© ì¤‘...</span>
                </div>
                <div class="content-item">
                    <span style="color: #8d6e63;">í™œì„± ì‚¬ìš©ì:</span>
                    <span id="active-users" style="color: #f5f0e6; font-weight: bold; float: right;">ë¡œë”© ì¤‘...</span>
                </div>
                <div class="content-item">
                    <span style="color: #8d6e63;">ì˜¤ëŠ˜ ëŒ€í™”:</span>
                    <span id="today-chats" style="color: #f5f0e6; font-weight: bold; float: right;">ë¡œë”© ì¤‘...</span>
                </div>
            </div>
            <button type="button" id="refresh-stats-btn" class="action-btn secondary-btn" style="width: 100%;">
                í†µê³„ ìƒˆë¡œê³ ì¹¨
            </button>
        </div>

        <div class="management-card">
            <h2 class="card-title">ğŸ˜¢ ê°ì • ë¶„ì„</h2>
            <div id="emotion-analysis" class="content-list">
                <p style="text-align: center; color: #8d6e63;">ê°ì • ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>
            <button type="button" id="refresh-emotions-btn" class="action-btn secondary-btn" style="width: 100%;">
                ê°ì • ë¶„ì„ ìƒˆë¡œê³ ì¹¨
            </button>
        </div>

        <div class="management-card">
            <h2 class="card-title">ğŸš¨ ê¸´ê¸‰ ìƒí™©</h2>
            <div id="urgent-messages" class="content-list">
                <p style="text-align: center; color: #8d6e63;">ê¸´ê¸‰ ë©”ì‹œì§€ë¥¼ í™•ì¸í•˜ëŠ” ì¤‘...</p>
            </div>
            <button type="button" id="refresh-urgent-btn" class="action-btn danger-btn" style="width: 100%;">
                ê¸´ê¸‰ ìƒí™© ìƒˆë¡œê³ ì¹¨
            </button>
        </div>
    </div>

    <div class="management-grid">
        <div class="management-card">
            <h2 class="card-title">ğŸ’¬ ìµœê·¼ ëŒ€í™”</h2>
            <div id="recent-chats" class="content-list">
                <p style="text-align: center; color: #8d6e63;">ìµœê·¼ ëŒ€í™”ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>
            <button type="button" id="refresh-chats-btn" class="action-btn secondary-btn" style="width: 100%;">
                ëŒ€í™” ê¸°ë¡ ìƒˆë¡œê³ ì¹¨
            </button>
        </div>

        <div class="management-card">
            <h2 class="card-title">ğŸ“ˆ ì£¼ì œë³„ ë¶„ì„</h2>
            <div id="topic-analysis" class="content-list">
                <p style="text-align: center; color: #8d6e63;">ì£¼ì œ ë¶„ì„ ì¤‘...</p>
            </div>
            <button type="button" id="refresh-topics-btn" class="action-btn secondary-btn" style="width: 100%;">
                ì£¼ì œ ë¶„ì„ ìƒˆë¡œê³ ì¹¨
            </button>
        </div>

        <div class="management-card">
            <h2 class="card-title">ğŸ”§ ì‹œìŠ¤í…œ ë¡œê·¸</h2>
            <div id="system-logs" class="content-list">
                <p style="text-align: center; color: #8d6e63;">ì‹œìŠ¤í…œ ë¡œê·¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>
            <button type="button" id="refresh-logs-btn" class="action-btn secondary-btn" style="width: 100%;">
                ë¡œê·¸ ìƒˆë¡œê³ ì¹¨
            </button>
        </div>
    </div>
</div>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp, getDocs, query, orderBy, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
import { getStorage, ref, uploadBytes, getDownloadURL, uploadBytesResumable } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-storage.js";

const firebaseConfig = {
  apiKey: "AIzaSyAIU8q64ZB6g8D72SPcCxxkOQmhtREN9cg",
  authDomain: "we-are-psychopath.firebaseapp.com",
  projectId: "we-are-psychopath",
  storageBucket: "we-are-psychopath.firebasestorage.app",
  messagingSenderId: "1020831167882",
  appId: "1:1020831167882:web:addcfd266307c3bb71c473",
  measurementId: "G-MG2X69DDK8"
};

const app = initializeApp(firebaseConfig);
window.db = getFirestore(app);
window.storage = getStorage(app);

const MASTER_KEY = "3292";

window.showTab = function(tabName) {
    document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
    
    event.target.classList.add('active');
    document.getElementById(tabName + '-tab').classList.add('active');
};

document.getElementById("login-btn").addEventListener("click", () => {
    const inputKey = document.getElementById("master-key").value.trim();
    
    if (inputKey === MASTER_KEY) {
        showMessage(document.getElementById("login-message"), "ë¡œê·¸ì¸ ì„±ê³µ!", "success");
        setTimeout(() => {
            document.getElementById("login-section").classList.add("hidden");
            document.getElementById("admin-panel").classList.remove("hidden");
            initializeForms();
            loadAllContent();
        }, 500);
    } else {
        showMessage(document.getElementById("login-message"), "ë§ˆìŠ¤í„°í‚¤ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.", "error");
    }
});

document.getElementById("master-key").addEventListener("keypress", (e) => {
    if (e.key === "Enter") {
        document.getElementById("login-btn").click();
    }
});

document.getElementById("logout-btn").addEventListener("click", () => {
    if (confirm("ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
        document.getElementById("admin-panel").classList.add("hidden");
        document.getElementById("login-section").classList.remove("hidden");
        document.getElementById("master-key").value = "";
    }
});

function initializeForms() {
    document.getElementById("archive-timeline-form").addEventListener("submit", async (e) => {
        e.preventDefault();
        const date = document.getElementById("archive-event-date").value;
        const title = document.getElementById("archive-event-title").value.trim();
        const description = document.getElementById("archive-event-description").value.trim();
        
        if (!date || !title || !description) {
            showMessage(document.getElementById("archive-timeline-message"), "ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.", "error");
            return;
        }
        
        try {
            await addDoc(collection(window.db, "archiveTimeline"), {
                date, title, description, timestamp: serverTimestamp()
            });
            showMessage(document.getElementById("archive-timeline-message"), "íƒ€ì„ë¼ì¸ ì´ë²¤íŠ¸ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!", "success");
            document.getElementById("archive-timeline-form").reset();
            loadArchiveTimeline();
        } catch (error) {
            console.error("íƒ€ì„ë¼ì¸ ì´ë²¤íŠ¸ ì¶”ê°€ ì˜¤ë¥˜:", error);
            showMessage(document.getElementById("archive-timeline-message"), "ì´ë²¤íŠ¸ ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", "error");
        }
    });

    document.getElementById("archive-video-form").addEventListener("submit", async (e) => {
        e.preventDefault();
        const title = document.getElementById("archive-video-title").value.trim();
        const description = document.getElementById("archive-video-description").value.trim();
        const url = document.getElementById("archive-video-url").value.trim();
        const duration = document.getElementById("archive-video-duration").value.trim();
        
        if (!title || !description || !url || !duration) {
            showMessage(document.getElementById("archive-video-message"), "ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.", "error");
            return;
        }
        
        try {
            const embedUrl = convertToEmbedUrl(url);
            await addDoc(collection(window.db, "archiveVideos"), {
                title, description, embedUrl, originalUrl: url, duration, timestamp: serverTimestamp()
            });
            showMessage(document.getElementById("archive-video-message"), "ì˜ìƒì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!", "success");
            document.getElementById("archive-video-form").reset();
            loadArchiveVideos();
        } catch (error) {
            console.error("ì˜ìƒ ì¶”ê°€ ì˜¤ë¥˜:", error);
            showMessage(document.getElementById("archive-video-message"), "ì˜ìƒ ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", "error");
        }
    });

    document.getElementById("archive-gallery-form").addEventListener("submit", async (e) => {
        e.preventDefault();
        const imageFile = document.getElementById("archive-gallery-image").files[0];
        const title = document.getElementById("archive-gallery-title").value.trim();
        const description = document.getElementById("archive-gallery-description").value.trim();
        const category = document.getElementById("archive-gallery-category").value;
        const messageEl = document.getElementById("archive-gallery-message");
        
        if (!imageFile || !title || !description || !category) {
            showMessage(messageEl, "ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.", "error");
            return;
        }
        
        try {
            const fileName = `${Date.now()}_${imageFile.name.replace(/[^a-zA-Z0-9.]/g, '_')}`;
            const storageRef = ref(window.storage, `archiveGallery/${fileName}`);
            const uploadTask = uploadBytesResumable(storageRef, imageFile);
            
            uploadTask.on('state_changed', 
                (snapshot) => {
                    const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                    showMessage(messageEl, `ì—…ë¡œë“œ ì¤‘... ${Math.round(progress)}%`, "success");
                },
                (error) => {
                    showMessage(messageEl, "ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", "error");
                },
                async () => {
                    const imageUrl = await getDownloadURL(uploadTask.snapshot.ref);
                    await addDoc(collection(window.db, "archiveGallery"), {
                        imageUrl, title, description, category, timestamp: serverTimestamp()
                    });
                    showMessage(messageEl, "ê°¤ëŸ¬ë¦¬ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!", "success");
                    document.getElementById("archive-gallery-form").reset();
                    document.getElementById("archive-gallery-file-info").textContent = "";
                    loadArchiveGallery();
                }
            );
        } catch (error) {
            console.error("ê°¤ëŸ¬ë¦¬ ì¶”ê°€ ì˜¤ë¥˜:", error);
            showMessage(messageEl, "ê°¤ëŸ¬ë¦¬ ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", "error");
        }
    });

    document.getElementById("archive-gallery-image").addEventListener("change", (e) => {
        const file = e.target.files[0];
        if (file) {
            document.getElementById("archive-gallery-file-info").textContent = 
                `íŒŒì¼: ${file.name} (${formatFileSize(file.size)})`;
        }
    });

    document.getElementById("refresh-archive-btn").addEventListener("click", () => {
        loadArchiveTimeline();
        loadArchiveVideos();
        loadArchiveGallery();
    });
}

async function loadArchiveTimeline() {
    try {
        const listEl = document.getElementById("archive-timeline-list");
        listEl.innerHTML = "<p style='text-align: center; color: #8d6e63;'>íƒ€ì„ë¼ì¸ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>";
        
        const snaps = await getDocs(query(collection(window.db, "archiveTimeline"), orderBy("date", "desc")));
        listEl.innerHTML = "";
        
        if (snaps.empty) {
            listEl.innerHTML = "<p style='text-align: center; color: #f5f0e6; font-style: italic;'>ë“±ë¡ëœ íƒ€ì„ë¼ì¸ ì´ë²¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
            return;
        }
        
        snaps.forEach(docSnap => {
            const { date, title, description } = docSnap.data();
            const id = docSnap.id;

            const div = document.createElement("div");
            div.className = "content-item";
            div.innerHTML = `
                <h4>${title}</h4>
                <p>ğŸ“… ${date}</p>
                <p>${description}</p>
                <div class="content-actions">
                    <button onclick="deleteArchiveItem('archiveTimeline', '${id}')" class="danger-btn">ì‚­ì œ</button>
                </div>
            `;
            listEl.appendChild(div);
        });
    } catch (error) {
        console.error("íƒ€ì„ë¼ì¸ ë¡œë“œ ì˜¤ë¥˜:", error);
        document.getElementById("archive-timeline-list").innerHTML = "<p style='color: #dc3545;'>íƒ€ì„ë¼ì¸ ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>";
    }
}

async function loadArchiveVideos() {
    try {
        const listEl = document.getElementById("archive-video-list");
        listEl.innerHTML = "<p style='text-align: center; color: #8d6e63;'>ì˜ìƒì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>";
        
        const snaps = await getDocs(query(collection(window.db, "archiveVideos"), orderBy("timestamp", "desc")));
        listEl.innerHTML = "";
        
        if (snaps.empty) {
            listEl.innerHTML = "<p style='text-align: center; color: #f5f0e6; font-style: italic;'>ë“±ë¡ëœ ì˜ìƒì´ ì—†ìŠµë‹ˆë‹¤.</p>";
            return;
        }
        
        snaps.forEach(docSnap => {
            const { title, description, duration } = docSnap.data();
            const id = docSnap.id;

            const div = document.createElement("div");
            div.className = "content-item";
            div.innerHTML = `
                <h4>${title}</h4>
                <p>â±ï¸ ${duration}</p>
                <p>${description}</p>
                <div class="content-actions">
                    <button onclick="deleteArchiveItem('archiveVideos', '${id}')" class="danger-btn">ì‚­ì œ</button>
                </div>
            `;
            listEl.appendChild(div);
        });
    } catch (error) {
        console.error("ì˜ìƒ ë¡œë“œ ì˜¤ë¥˜:", error);
        document.getElementById("archive-video-list").innerHTML = "<p style='color: #dc3545;'>ì˜ìƒ ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>";
    }
}

async function loadArchiveGallery() {
    try {
        const listEl = document.getElementById("archive-gallery-list");
        listEl.innerHTML = "<p style='text-align: center; color: #8d6e63;'>ê°¤ëŸ¬ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>";
        
        const snaps = await getDocs(query(collection(window.db, "archiveGallery"), orderBy("timestamp", "desc")));
        listEl.innerHTML = "";
        
        if (snaps.empty) {
            listEl.innerHTML = "<p style='text-align: center; color: #f5f0e6; font-style: italic;'>ë“±ë¡ëœ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
            return;
        }
        
        snaps.forEach(docSnap => {
            const { title, description, category } = docSnap.data();
            const id = docSnap.id;

            const categoryLabels = {
                production: 'ì œì‘ í˜„ì¥',
                interview: 'ì¸í„°ë·°',
                daily: 'ì¼ìƒ',
                document: 'ìë£Œ'
            };

            const div = document.createElement("div");
            div.className = "content-item";
            div.innerHTML = `
                <h4>${title}</h4>
                <p>ğŸ“‚ ${categoryLabels[category] || category}</p>
                <p>${description}</p>
                <div class="content-actions">
                    <button onclick="deleteArchiveItem('archiveGallery', '${id}')" class="danger-btn">ì‚­ì œ</button>
                </div>
            `;
            listEl.appendChild(div);
        });
    } catch (error) {
        console.error("ê°¤ëŸ¬ë¦¬ ë¡œë“œ ì˜¤ë¥˜:", error);
        document.getElementById("archive-gallery-list").innerHTML = "<p style='color: #dc3545;'>ê°¤ëŸ¬ë¦¬ ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>";
    }
}

window.deleteArchiveItem = async function(collection_name, itemId) {
    if (!confirm("ì •ë§ ì´ í•­ëª©ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
    
    try {
        await deleteDoc(doc(window.db, collection_name, itemId));
        showMessage(document.getElementById("archive-timeline-message"), "í•­ëª©ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!", "success");
        
        if (collection_name === 'archiveTimeline') loadArchiveTimeline();
        else if (collection_name === 'archiveVideos') loadArchiveVideos();
        else if (collection_name === 'archiveGallery') loadArchiveGallery();
    } catch (error) {
        console.error("ì‚­ì œ ì˜¤ë¥˜:", error);
        showMessage(document.getElementById("archive-timeline-message"), "ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", "error");
    }
};

function convertToEmbedUrl(url) {
    let videoId = '';
    
    if (url.includes('youtube.com/watch?v=')) {
        videoId = url.split('v=')[1].split('&')[0];
    } else if (url.includes('youtu.be/')) {
        videoId = url.split('youtu.be/')[1].split('?')[0];
    } else if (url.includes('youtube.com/embed/')) {
        return url;
    }
    
    if (videoId) {
        return `https://www.youtube.com/embed/${videoId}`;
    }
    
    return url;
}

function formatFileSize(bytes) {
    if (bytes === 0) return '0 Bytes';
    const k = 1024;
    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
}

function showMessage(element, message, type) {
    element.innerHTML = `<div class="status-message ${type}">${message}</div>`;
    setTimeout(() => {
        element.innerHTML = "";
    }, 5000);
}

function loadAllContent() {
    loadArchiveTimeline();
    loadArchiveVideos();
    loadArchiveGallery();
}
</script>
</body>
</html>